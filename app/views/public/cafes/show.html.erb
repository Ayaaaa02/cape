<div class="content public-cafes-show">
<div class="container">
    <div class="row- my-3">
<div class="col-8 offset-2 mb-5 text-center">
<%= attachment_image_tag @cafe, :image, width: "80%", fallback: "no_image.jpg"%>
<table class="table m-3">
<tr>
<th><strong>カフェ名</strong></th>
<td><%= @cafe.name %></td>
</tr>

<tr>
<th><strong>店舗住所</strong></th>
<td><%= @cafe.address %></td>
</tr>


<tr>
<th><strong>店舗説明</strong></th>
<td><%= @cafe.description %></td>
</tr>
</table>

<div>
<%= link_to "予約する", public_reservations_new_path, class: "btn btn-outline-danger" %>
</div>

<div id="map"></div>

<script>
     let map;

  function initMap() {
    // geocoderを初期化
    geocoder = new google.maps.Geocoder()

    map = new google.maps.Map(document.getElementById('map'), {
      // コントローラーで定義した変数から緯度経度を呼び出し、マップの中心に表示
      center: {
        lat: gon.cafe.latitude,
        lng: gon.cafe.longitude
      },
      // マップの倍率はお好みで
      zoom: 17,
    });

    marker = new google.maps.Marker({
      // コントローラーで定義した変数から緯度経度を呼び出し、マーカーを立てる
      position: {
        lat: gon.cafe.latitude,
        lng: gon.cafe.longitude
      },
      map: map
    });
  }
</script>

<script async defer
      src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=<%= ENV['GOOGLE_MAP_API'] %>&callback=initMap">
</script>
  </div>
 </div>
</div>
</div>